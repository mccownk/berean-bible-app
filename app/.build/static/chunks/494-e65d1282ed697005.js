"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[494],{6948:function(e,a,t){t.d(a,{X:function(){return d},bZ:function(){return i}});var s=t(5444),r=t(9300),n=t(2371),l=t(5522);let o=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),i=r.forwardRef(({className:e,variant:a,...t},r)=>(0,s.jsx)("div",{ref:r,role:"alert",className:(0,l.cn)(o({variant:a}),e),...t}));i.displayName="Alert",r.forwardRef(({className:e,...a},t)=>(0,s.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",e),...a})).displayName="AlertTitle";let d=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",e),...a}));d.displayName="AlertDescription"},9530:function(e,a,t){t.d(a,{$N:function(){return x},Be:function(){return f},Vq:function(){return i},cZ:function(){return m},fK:function(){return u}});var s=t(5444),r=t(9300),n=t(9095),l=t(3485),o=t(5522);let i=n.fC;n.xz;let d=n.h_;n.x8;let c=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(n.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));c.displayName=n.aV.displayName;let m=r.forwardRef(({className:e,children:a,...t},r)=>(0,s.jsxs)(d,{children:[(0,s.jsx)(c,{}),(0,s.jsxs)(n.VY,{ref:r,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[a,(0,s.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=n.VY.displayName;let u=({className:e,...a})=>(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});u.displayName="DialogHeader";let x=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(n.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));x.displayName=n.Dx.displayName;let f=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(n.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",e),...a}));f.displayName=n.dk.displayName},4536:function(e,a,t){t.d(a,{m:function(){return V}});var s=t(5444),r=t(9300),n=t(9582),l=t(3144),o=t(4614),i=t(6488),d=t(1410),c=t(3751),m=t(5076),u=t(7248),x=t(2422),f=t(1335),p=t(1033),h=t(5522);let g=r.forwardRef(({className:e,orientation:a="horizontal",decorative:t=!0,...r},n)=>(0,s.jsx)(p.f,{ref:n,decorative:t,orientation:a,className:(0,h.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",e),...r}));g.displayName=p.f.displayName;var N=t(4712);let j=r.forwardRef(({className:e,children:a,...t},r)=>(0,s.jsxs)(N.fC,{ref:r,className:(0,h.cn)("relative overflow-hidden",e),...t,children:[(0,s.jsx)(N.l_,{className:"h-full w-full rounded-[inherit]",children:a}),(0,s.jsx)(y,{}),(0,s.jsx)(N.Ns,{})]}));j.displayName=N.fC.displayName;let y=r.forwardRef(({className:e,orientation:a="vertical",...t},r)=>(0,s.jsx)(N.gb,{ref:r,orientation:a,className:(0,h.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...t,children:(0,s.jsx)(N.q4,{className:"relative flex-1 rounded-full bg-border"})}));y.displayName=N.gb.displayName;var v=t(829);let b=v.fC,w=v.xz,S=r.forwardRef(({className:e,align:a="center",sideOffset:t=4,...r},n)=>(0,s.jsx)(v.h_,{children:(0,s.jsx)(v.VY,{ref:n,align:a,sideOffset:t,className:(0,h.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));S.displayName=v.VY.displayName;var C=t(3108);t(9530);let T=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(C.mY,{ref:t,className:(0,h.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...a}));T.displayName=C.mY.displayName;let k=r.forwardRef(({className:e,...a},t)=>(0,s.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,s.jsx)(m.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,s.jsx)(C.mY.Input,{ref:t,className:(0,h.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...a})]}));k.displayName=C.mY.Input.displayName;let D=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(C.mY.List,{ref:t,className:(0,h.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...a}));D.displayName=C.mY.List.displayName;let I=r.forwardRef((e,a)=>(0,s.jsx)(C.mY.Empty,{ref:a,className:"py-6 text-center text-sm",...e}));I.displayName=C.mY.Empty.displayName;let A=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(C.mY.Group,{ref:t,className:(0,h.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...a}));A.displayName=C.mY.Group.displayName,r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(C.mY.Separator,{ref:t,className:(0,h.cn)("-mx-1 h-px bg-border",e),...a})).displayName=C.mY.Separator.displayName;let R=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(C.mY.Item,{ref:t,className:(0,h.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...a}));function E({selectedTranslation:e,onTranslationChange:a,translations:t,translationGroups:m,recentTranslations:u=[],favoriteTranslations:p=[],compact:g=!1,showDescription:N=!0,className:j}){let[y,v]=(0,r.useState)(!1),[C,T]=(0,r.useState)(""),[k,D]=(0,r.useState)(null),I=t.find(a=>a.id===e),A=t.filter(e=>e.name.toLowerCase().includes(C.toLowerCase())||e.abbreviation.toLowerCase().includes(C.toLowerCase())||e.description&&e.description.toLowerCase().includes(C.toLowerCase())),R=t.filter(e=>u.includes(e.id)).slice(0,5),E=t.filter(e=>p.includes(e.id)),Z=e=>{a(e),v(!1)},O=e=>{switch(e){case"popular":return(0,s.jsx)(n.Z,{className:"h-3 w-3 text-yellow-600"});case"modern":return(0,s.jsx)(l.Z,{className:"h-3 w-3 text-blue-600"});case"traditional":return(0,s.jsx)(o.Z,{className:"h-3 w-3 text-amber-600"});case"specialized":return(0,s.jsx)(i.Z,{className:"h-3 w-3 text-purple-600"});case"historical":return(0,s.jsx)(d.Z,{className:"h-3 w-3 text-gray-600"});default:return(0,s.jsx)(o.Z,{className:"h-3 w-3"})}},Y=e=>{switch(e){case"popular":return"bg-yellow-50 border-yellow-200 text-yellow-700";case"modern":return"bg-blue-50 border-blue-200 text-blue-700";case"traditional":return"bg-amber-50 border-amber-200 text-amber-700";case"specialized":return"bg-purple-50 border-purple-200 text-purple-700";case"historical":return"bg-gray-50 border-gray-200 text-gray-700";default:return"bg-muted border-muted-foreground/20"}};return g?(0,s.jsxs)(b,{open:y,onOpenChange:v,children:[(0,s.jsx)(w,{asChild:!0,children:(0,s.jsxs)(x.z,{variant:"outline",role:"combobox","aria-expanded":y,className:(0,h.cn)("justify-between",j),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[I&&O(I.category),(0,s.jsx)("span",{className:"font-medium",children:I?.abbreviation||e})]}),(0,s.jsx)(c.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,s.jsx)(S,{className:"w-80 p-0",align:"start",children:(0,s.jsx)(_,{translations:A,translationGroups:m,recentTranslations:R,favoriteTranslations:E,selectedTranslation:e,searchQuery:C,onSearchChange:T,onSelect:Z,showDescription:N,getCategoryIcon:O,getCategoryColor:Y})})]}):(0,s.jsxs)("div",{className:(0,h.cn)("space-y-2",j),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Bible Translation"}),(0,s.jsxs)(f.C,{variant:"outline",className:"text-xs",children:[t.length," available"]})]}),(0,s.jsxs)(b,{open:y,onOpenChange:v,children:[(0,s.jsx)(w,{asChild:!0,children:(0,s.jsxs)(x.z,{variant:"outline",role:"combobox","aria-expanded":y,className:"w-full justify-between h-auto p-3",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 text-left",children:[I&&O(I.category),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:I?.abbreviation||e}),(0,s.jsx)(f.C,{variant:"outline",className:(0,h.cn)("text-xs",I&&Y(I.category)),children:I?.source==="esv"?"ESV API":"API.Bible"})]}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:I?.name||"Select translation..."}),N&&I?.description&&(0,s.jsx)("div",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:I.description})]})]}),(0,s.jsx)(c.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,s.jsx)(S,{className:"w-[500px] p-0",align:"start",children:(0,s.jsx)(_,{translations:A,translationGroups:m,recentTranslations:R,favoriteTranslations:E,selectedTranslation:e,searchQuery:C,onSearchChange:T,onSelect:Z,showDescription:N,getCategoryIcon:O,getCategoryColor:Y})})]})]})}function _({translations:e,translationGroups:a,recentTranslations:t,favoriteTranslations:r,selectedTranslation:l,searchQuery:o,onSearchChange:i,onSelect:d,showDescription:c,getCategoryIcon:x,getCategoryColor:p}){return(0,s.jsxs)(T,{children:[(0,s.jsxs)("div",{className:"flex items-center border-b px-3",children:[(0,s.jsx)(m.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,s.jsx)(k,{placeholder:"Search translations...",value:o,onValueChange:i,className:"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50"})]}),(0,s.jsx)(D,{children:(0,s.jsxs)(j,{className:"max-h-[400px]",children:[""===o&&(0,s.jsxs)(s.Fragment,{children:[t.length>0&&(0,s.jsx)(A,{heading:"Recently Used",children:t.map(e=>(0,s.jsxs)(R,{value:e.id,onSelect:d,className:"flex items-start gap-3 p-3",children:[(0,s.jsx)(u.Z,{className:(0,h.cn)("h-4 w-4 mt-0.5",l===e.id?"opacity-100":"opacity-0")}),(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[x(e.category),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:e.abbreviation}),(0,s.jsx)(f.C,{variant:"outline",className:"text-xs",children:"esv"===e.source?"ESV":"API"})]}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground truncate",children:e.name})]})]})]},e.id))}),r.length>0&&(0,s.jsx)(A,{heading:"Favorites",children:r.map(e=>(0,s.jsxs)(R,{value:e.id,onSelect:d,className:"flex items-start gap-3 p-3",children:[(0,s.jsx)(u.Z,{className:(0,h.cn)("h-4 w-4 mt-0.5",l===e.id?"opacity-100":"opacity-0")}),(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,s.jsx)(n.Z,{className:"h-3 w-3 text-yellow-500 fill-yellow-500"}),x(e.category),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:e.abbreviation}),(0,s.jsx)(f.C,{variant:"outline",className:"text-xs",children:"esv"===e.source?"ESV":"API"})]}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground truncate",children:e.name})]})]})]},e.id))}),(t.length>0||r.length>0)&&(0,s.jsx)(g,{})]}),""===o?a.map(e=>(0,s.jsx)(A,{heading:e.label,children:e.translations.map(e=>(0,s.jsx)(Z,{translation:e,isSelected:l===e.id,onSelect:d,showDescription:c,getCategoryIcon:x,getCategoryColor:p},e.id))},e.category)):(0,s.jsx)(A,{heading:"Search Results",children:0===e.length?(0,s.jsx)(I,{children:"No translations found."}):e.map(e=>(0,s.jsx)(Z,{translation:e,isSelected:l===e.id,onSelect:d,showDescription:c,getCategoryIcon:x,getCategoryColor:p},e.id))})]})})]})}function Z({translation:e,isSelected:a,onSelect:t,showDescription:r,getCategoryIcon:n,getCategoryColor:l}){return(0,s.jsxs)(R,{value:e.id,onSelect:t,className:"flex items-start gap-3 p-3",children:[(0,s.jsx)(u.Z,{className:(0,h.cn)("h-4 w-4 mt-0.5",a?"opacity-100":"opacity-0")}),(0,s.jsxs)("div",{className:"flex items-start gap-2 min-w-0 flex-1",children:[n(e.category),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("span",{className:"font-medium",children:e.abbreviation}),(0,s.jsx)(f.C,{variant:"outline",className:(0,h.cn)("text-xs",l(e.category)),children:e.category}),(0,s.jsx)(f.C,{variant:"outline",className:"text-xs",children:"esv"===e.source?"ESV API":"API.Bible"})]}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:e.name}),r&&e.description&&(0,s.jsx)("div",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.description})]})]})]})}function O({className:e,...a}){return(0,s.jsx)("div",{className:(0,h.cn)("animate-pulse rounded-md bg-muted",e),...a})}R.displayName=C.mY.Item.displayName;var Y=t(6948),z=t(6772);function V({selectedTranslation:e,onTranslationChange:a,compact:t=!1,showDescription:n=!0,className:l,userId:o}){let[i,d]=(0,r.useState)([]),[c,m]=(0,r.useState)([]),[u,x]=(0,r.useState)([]),[f,p]=(0,r.useState)([]),[h,g]=(0,r.useState)(!0),[N,j]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{g(!0),j(null),console.log("\uD83D\uDD0D TranslationSelectorWrapper: Starting to fetch translations...");let[e,a]=await Promise.all([fetch("/api/bible/translations"),fetch("/api/bible/translation-groups")]);if(console.log("\uD83D\uDCE1 API Responses:",{translations:{status:e.status,ok:e.ok},groups:{status:a.status,ok:a.ok}}),!e.ok||!a.ok){let t=`Failed to fetch translations: translations=${e.status}, groups=${a.status}`;throw console.error("❌",t),Error(t)}let t=await e.json(),s=await a.json();console.log("\uD83D\uDCCA Translation Data Received:",{translationsCount:t.translations?.length||0,groupsCount:s.groups?.length||0,translationsData:t,groupsData:s});let r=t.translations||[],n=s.groups||[];if(0===r.length&&console.warn("⚠️ No translations received from API"),d(r),m(n),o)try{let e=await fetch(`/api/user/translation-preferences?userId=${o}`);if(e.ok){let a=await e.json();x(a.translationHistory||[]),p(a.favoriteTranslations||[])}}catch(e){console.warn("Failed to fetch user translation preferences:",e)}}catch(e){console.error("Error fetching translations:",e),j("Failed to load translations. Please try again.")}finally{g(!1)}})()},[o]);let y=async e=>{if(a(e),o)try{await fetch("/api/user/update-translation-history",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:o,translationId:e})}),x(a=>[e,...a.filter(a=>a!==e)].slice(0,5))}catch(e){console.warn("Failed to update translation history:",e)}};return h?(0,s.jsxs)("div",{className:l,children:[!t&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(O,{className:"h-4 w-32"}),(0,s.jsx)(O,{className:"h-4 w-16"})]}),(0,s.jsx)(O,{className:"h-16 w-full"})]}),t&&(0,s.jsx)(O,{className:"h-10 w-32"})]}):N?(0,s.jsxs)(Y.bZ,{variant:"destructive",className:l,children:[(0,s.jsx)(z.Z,{className:"h-4 w-4"}),(0,s.jsx)(Y.X,{children:N})]}):0===i.length?(0,s.jsxs)(Y.bZ,{className:l,children:[(0,s.jsx)(z.Z,{className:"h-4 w-4"}),(0,s.jsx)(Y.X,{children:"No translations available. Please check your connection and try again."})]}):(0,s.jsx)(E,{selectedTranslation:e,onTranslationChange:y,translations:i,translationGroups:c,recentTranslations:u,favoriteTranslations:f,compact:t,showDescription:n,className:l})}},5854:function(e,a,t){t.d(a,{pm:function(){return u}});var s=t(9300);let r=0,n=new Map,l=e=>{if(n.has(e))return;let a=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,a)},o=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?l(t):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},i=[],d={toasts:[]};function c(e){d=o(d,e),i.forEach(e=>{e(d)})}function m({...e}){let a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...e,id:a,open:!0,onOpenChange:e=>{e||t()}}}),{id:a,dismiss:t,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,a]=s.useState(d);return s.useEffect(()=>(i.push(a),()=>{let e=i.indexOf(a);e>-1&&i.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}}]);