(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{2430:function(e,s,a){Promise.resolve().then(a.bind(a,8410))},8410:function(e,s,a){"use strict";a.d(s,{ProfileContent:function(){return B}});var t=a(5444),r=a(9300),n=a(5762),i=a(2422),l=a(4678),d=a(3508),c=a(9827),o=a(5994),u=a(8051),m=a(8788),f=a(838),h=a(7449),p=a(7681),x=a(7234),j="Switch",[g,y]=(0,m.b)(j),[b,v]=g(j),N=r.forwardRef((e,s)=>{let{__scopeSwitch:a,name:n,checked:i,defaultChecked:l,required:d,disabled:c,value:m="on",onCheckedChange:h,...p}=e,[j,g]=r.useState(null),y=(0,u.e)(s,e=>g(e)),v=r.useRef(!1),N=!j||!!j.closest("form"),[w=!1,k]=(0,f.T)({prop:i,defaultProp:l,onChange:h});return(0,t.jsxs)(b,{scope:a,checked:w,disabled:c,children:[(0,t.jsx)(x.WV.button,{type:"button",role:"switch","aria-checked":w,"aria-required":d,"data-state":S(w),"data-disabled":c?"":void 0,disabled:c,value:m,...p,ref:y,onClick:(0,o.M)(e.onClick,e=>{k(e=>!e),N&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())})}),N&&(0,t.jsx)(E,{control:j,bubbles:!v.current,name:n,value:m,checked:w,required:d,disabled:c,style:{transform:"translateX(-100%)"}})]})});N.displayName=j;var w="SwitchThumb",k=r.forwardRef((e,s)=>{let{__scopeSwitch:a,...r}=e,n=v(w,a);return(0,t.jsx)(x.WV.span,{"data-state":S(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:s})});k.displayName=w;var E=e=>{let{control:s,checked:a,bubbles:n=!0,...i}=e,l=r.useRef(null),d=(0,h.D)(a),c=(0,p.t)(s);return r.useEffect(()=>{let e=l.current,s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==a&&s){let t=new Event("click",{bubbles:n});s.call(e,a),e.dispatchEvent(t)}},[d,a,n]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...i,tabIndex:-1,ref:l,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function S(e){return e?"checked":"unchecked"}var C=a(5522);let R=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(N,{className:(0,C.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:a,children:(0,t.jsx)(k,{className:(0,C.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));R.displayName=N.displayName;var _=a(489),P=a(5854),T=a(8388),Z=a(4536),M=a(7480),O=a(4693),D=a(6488),L=a(2492),z=a(2154);let I=(0,z.Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);var Q=a(1946);let V=(0,z.Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var F=a(9047),Y=a(4790);function B({data:e}){let{update:s}=(0,n.useSession)(),{toast:a}=(0,P.pm)(),o=(0,F.useRouter)(),{theme:u,setTheme:m,mounted:f}=(0,T.v)(),[h,p]=(0,r.useState)(!1),[x,j]=(0,r.useState)(e.user.name||""),[g,y]=(0,r.useState)(e.user.preferences.notificationsEnabled),[b,v]=(0,r.useState)(e.user.preferences.theme||"light"),[N,w]=(0,r.useState)(e.user.preferences.fontSize||"medium"),[k,E]=(0,r.useState)(e.user.preferences.preferredReadingTime||15),[S,z]=(0,r.useState)(e.user.preferences.preferredTimeOfDay||"Morning"),[B,A]=(0,r.useState)(e.user.preferences.preferredStartTime||"09:00"),[H,U]=(0,r.useState)(e.user.preferences.preferredTranslation||"ESV");(0,r.useEffect)(()=>{if(f&&e.user.preferences.theme){let s=e.user.preferences.theme;m(s),v(s)}},[f,m]),(0,r.useEffect)(()=>{f&&v(u)},[u,f]);let q=async()=>{p(!0);try{if((await fetch("/api/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x,notificationsEnabled:g,theme:b,fontSize:N,preferredReadingTime:k,preferredTimeOfDay:S,preferredStartTime:B,preferredTranslation:H})})).ok)await s({name:x}),a({title:"Profile updated",description:"Your preferences have been saved successfully."});else throw Error("Failed to update profile")}catch(e){a({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"})}finally{p(!1)}},G=async()=>{await (0,n.signOut)({redirect:!1}),o.push("/")},W=async()=>{try{let e=await fetch("/api/profile/export");if(e.ok){let s=await e.blob(),t=window.URL.createObjectURL(s),r=document.createElement("a");r.href=t,r.download=`berean-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(t),document.body.removeChild(r),a({title:"Data exported",description:"Your reading data has been downloaded."})}else throw Error("Failed to export data")}catch(e){a({title:"Error",description:"Failed to export data. Please try again.",variant:"destructive"})}};return(0,t.jsx)(Y.L,{children:(0,t.jsxs)("div",{className:"container mx-auto max-w-2xl p-4 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold font-serif",children:"Profile"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage your account and reading preferences"})]}),(0,t.jsxs)(i.z,{variant:"outline",onClick:G,children:[(0,t.jsx)(M.Z,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]}),(0,t.jsxs)(c.Zb,{children:[(0,t.jsx)(c.Ol,{children:(0,t.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(O.Z,{className:"h-5 w-5"}),"Account Information"]})}),(0,t.jsxs)(c.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"name",children:"Name"}),(0,t.jsx)(l.I,{id:"name",value:x,onChange:e=>j(e.target.value),placeholder:"Enter your name"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"email",children:"Email"}),(0,t.jsx)(l.I,{id:"email",value:e.user.email,disabled:!0,className:"bg-muted"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{children:"Member Since"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,C.p6)(e.user.createdAt)})]})]})]}),(0,t.jsxs)(c.Zb,{children:[(0,t.jsx)(c.Ol,{children:(0,t.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(D.Z,{className:"h-5 w-5"}),"Reading Preferences"]})}),(0,t.jsxs)(c.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{children:"Preferred Reading Time"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(L.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)(l.I,{type:"number",value:k,onChange:e=>E(Number(e.target.value)),min:"5",max:"60",className:"w-20"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"minutes per day"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{children:"Time of Day Preference"}),(0,t.jsxs)(_.Ph,{value:S,onValueChange:z,children:[(0,t.jsx)(_.i4,{children:(0,t.jsx)(_.ki,{placeholder:"Select time of day"})}),(0,t.jsxs)(_.Bw,{children:[(0,t.jsx)(_.Ql,{value:"Morning",children:"Morning"}),(0,t.jsx)(_.Ql,{value:"Afternoon",children:"Afternoon"}),(0,t.jsx)(_.Ql,{value:"Evening",children:"Evening"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{children:"Preferred Start Time"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(L.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)(l.I,{type:"time",value:B,onChange:e=>A(e.target.value),className:"w-32"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"for your daily reading"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{children:"Theme"}),(0,t.jsxs)(_.Ph,{value:b,onValueChange:e=>{v(e),m(e)},children:[(0,t.jsx)(_.i4,{children:(0,t.jsx)(_.ki,{})}),(0,t.jsxs)(_.Bw,{children:[(0,t.jsx)(_.Ql,{value:"light",children:"Light"}),(0,t.jsx)(_.Ql,{value:"dark",children:"Dark"}),(0,t.jsx)(_.Ql,{value:"sepia",children:"Sepia"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{children:"Font Size"}),(0,t.jsxs)(_.Ph,{value:N,onValueChange:w,children:[(0,t.jsx)(_.i4,{children:(0,t.jsx)(_.ki,{})}),(0,t.jsxs)(_.Bw,{children:[(0,t.jsx)(_.Ql,{value:"small",children:"Small"}),(0,t.jsx)(_.Ql,{value:"medium",children:"Medium"}),(0,t.jsx)(_.Ql,{value:"large",children:"Large"}),(0,t.jsx)(_.Ql,{value:"extra-large",children:"Extra Large"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(Z.m,{selectedTranslation:H,onTranslationChange:U,userId:e.user.id,showDescription:!1,className:"w-full"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Choose your preferred Bible translation for reading"})]})]})]}),(0,t.jsxs)(c.Zb,{children:[(0,t.jsx)(c.Ol,{children:(0,t.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(I,{className:"h-5 w-5"}),"Notifications"]})}),(0,t.jsx)(c.aY,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d._,{children:"Daily Reading Reminders"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get notified when it's time for your daily reading"})]}),(0,t.jsx)(R,{checked:g,onCheckedChange:y})]})})]}),(0,t.jsxs)(c.Zb,{children:[(0,t.jsx)(c.Ol,{children:(0,t.jsx)(c.ll,{children:"Data Management"})}),(0,t.jsx)(c.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d._,{children:"Export Data"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Download your reading progress and notes"})]}),(0,t.jsx)(i.z,{variant:"outline",onClick:W,children:"Export"})]})})]}),(0,t.jsxs)(i.z,{onClick:q,disabled:h,className:"w-full",children:[h?(0,t.jsx)(Q.Z,{className:"h-4 w-4 animate-spin mr-2"}):(0,t.jsx)(V,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})})}},8388:function(e,s,a){"use strict";a.d(s,{ThemeProvider:function(){return i},v:function(){return l}});var t=a(5444),r=a(9300),n=a(1844);function i({children:e,...s}){return(0,t.jsx)(n.f,{...s,children:e})}function l(){let{theme:e,setTheme:s,systemTheme:a}=(0,n.F)(),[t,i]=r.useState(!1);r.useEffect(()=>{i(!0)},[]);let l=r.useCallback(e=>{t&&(document.documentElement.classList.remove("theme-sepia"),"sepia"===e?(document.documentElement.classList.add("theme-sepia"),s("light")):s(e))},[s,t]);return{theme:r.useCallback(()=>t?document.documentElement.classList.contains("theme-sepia")?"sepia":document.documentElement.classList.contains("dark")?"dark":"light":"light",[t])(),setTheme:l,systemTheme:a,mounted:t}}},4678:function(e,s,a){"use strict";a.d(s,{I:function(){return i}});var t=a(5444),r=a(9300),n=a(5522);let i=r.forwardRef(({className:e,type:s,...a},r)=>(0,t.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));i.displayName="Input"},3508:function(e,s,a){"use strict";a.d(s,{_:function(){return o}});var t=a(5444),r=a(9300),n=a(7234),i=r.forwardRef((e,s)=>(0,t.jsx)(n.WV.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));i.displayName="Label";var l=a(2371),d=a(5522);let c=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(i,{ref:a,className:(0,d.cn)(c(),e),...s}));o.displayName=i.displayName},489:function(e,s,a){"use strict";a.d(s,{Bw:function(){return p},Ph:function(){return o},Ql:function(){return x},i4:function(){return m},ki:function(){return u}});var t=a(5444),r=a(9300),n=a(6696),i=a(3751),l=a(6997),d=a(7248),c=a(5522);let o=n.fC;n.ZA;let u=n.B4,m=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(n.xz,{ref:r,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:[s,(0,t.jsx)(n.JO,{asChild:!0,children:(0,t.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=n.xz.displayName;let f=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.u_,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,t.jsx)(l.Z,{className:"h-4 w-4"})}));f.displayName=n.u_.displayName;let h=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.$G,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,t.jsx)(i.Z,{className:"h-4 w-4"})}));h.displayName=n.$G.displayName;let p=r.forwardRef(({className:e,children:s,position:a="popper",...r},i)=>(0,t.jsx)(n.h_,{children:(0,t.jsxs)(n.VY,{ref:i,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...r,children:[(0,t.jsx)(f,{}),(0,t.jsx)(n.l_,{className:(0,c.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,t.jsx)(h,{})]})}));p.displayName=n.VY.displayName,r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.__,{ref:a,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=n.__.displayName;let x=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(n.ck,{ref:r,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(n.wU,{children:(0,t.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(n.eT,{children:s})]}));x.displayName=n.ck.displayName,r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.Z0,{ref:a,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=n.Z0.displayName}},function(e){e.O(0,[808,75,327,151,270,119,857,640,494,386,156,744],function(){return e(e.s=2430)}),_N_E=e.O()}]);