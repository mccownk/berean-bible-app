(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[388],{1402:function(e,s,t){Promise.resolve().then(t.bind(t,7558))},7558:function(e,s,t){"use strict";t.d(s,{ReadingContent:function(){return S}});var a=t(5444),i=t(9300),n=t(2422),r=t(9827),l=t(1335),d=t(5522);let o=i.forwardRef(({className:e,...s},t)=>(0,a.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));o.displayName="Textarea";var c=t(4536),m=t(5854),h=t(2154);let x=(0,h.Z)("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);var p=t(2492),g=t(6124);let u=(0,h.Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),j=(0,h.Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),f=(0,h.Z)("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]),N=(0,h.Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var b=t(4614),v=t(1946);let y=(0,h.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var w=t(3572),C=t(9047),k=t(4790),T=t(5762);function S({data:e}){let[s,t]=(0,i.useState)(""),[h,S]=(0,i.useState)(""),[Z,z]=(0,i.useState)("ESV"),[P,O]=(0,i.useState)(!0),[$,E]=(0,i.useState)(!1),[R,M]=(0,i.useState)(""),[D,B]=(0,i.useState)(!1),[I,_]=(0,i.useState)(!1),[Y,F]=(0,i.useState)(0),[L,q]=(0,i.useState)(0),[A,G]=(0,i.useState)(0),[J,V]=(0,i.useState)(!1),[W,H]=(0,i.useState)("both"),{toast:U}=(0,m.pm)(),K=(0,C.useRouter)(),{data:Q}=(0,T.useSession)(),X=e.reading.ntPassages||e.reading.passages||[],ee=e.reading.otPassages||[];[...X,...ee];let es=async e=>{z(e),O(!0);try{await et(e),U({title:"Translation updated",description:`Switched to ${e}`})}catch(e){U({title:"Error changing translation",description:"Please try again.",variant:"destructive"})}},et=async(e=Z)=>{try{if(O(!0),X.length>0){let s=await fetch(`/api/bible/passage?passages=${X.join(",")}&translation=${e}`),a=await s.json();s.ok&&t(a.content)}if(ee.length>0){let s=await fetch(`/api/bible/passage?passages=${ee.join(",")}&translation=${e}`),t=await s.json();s.ok&&S(t.content)}}catch(e){U({title:"Error loading Bible text",description:"Please check your connection and try again.",variant:"destructive"})}finally{O(!1)}};(0,i.useEffect)(()=>{et()},[X,ee]),(0,i.useEffect)(()=>{let e;return J&&(e=setInterval(()=>{F(e=>e+1),("nt"===W||"both"===W)&&q(e=>e+1),("ot"===W||"both"===W)&&G(e=>e+1)},1e3)),()=>clearInterval(e)},[J,W]),(0,i.useEffect)(()=>{e.progress.isCompleted||P||V(!0)},[e.progress.isCompleted,P]);let ea=async s=>{E(!0);try{if((await fetch("/api/progress/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({progressId:e.progress.id,section:s,ntReadingTimeSeconds:L,otReadingTimeSeconds:A,totalReadingTimeSeconds:Y})})).ok)s?U({title:`${s.toUpperCase()} reading completed! ðŸŽ‰`,description:`Great job on completing the ${"nt"===s?"New Testament":"Old Testament"} portion.`}):(U({title:"Reading completed! \uD83C\uDF89",description:"Great job on your daily Scripture reading."}),setTimeout(()=>{K.push("/dashboard")},1500));else throw Error("Failed to mark reading as complete")}catch(e){U({title:"Error",description:"Failed to mark reading as complete. Please try again.",variant:"destructive"})}finally{E(!1)}},ei=async()=>{let s=[X.length>0?`NT: ${X.join(", ")}`:"",ee.length>0?`OT: ${ee.join(", ")}`:""].filter(Boolean).join(" | "),t={title:`Day ${e.reading.day}: ${s}`,text:`I'm reading ${s} today as part of my 1,260-day Berean Bible journey! (Phase ${e.reading.phase})`,url:window.location.href};if(navigator.share)try{await navigator.share(t)}catch(e){}else await navigator.clipboard.writeText(`${t.text} ${t.url}`),U({title:"Copied to clipboard",description:"Share link has been copied to your clipboard."})},en=async()=>{if(R.trim())try{if((await fetch("/api/notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({readingId:e.reading.id,content:R.trim()})})).ok)U({title:"Note saved",description:"Your reflection has been saved."}),M(""),B(!1);else throw Error("Failed to save note")}catch(e){U({title:"Error",description:"Failed to save note. Please try again.",variant:"destructive"})}},er=e.reading.phase||(0,d.p)(e.reading.day),el=e.reading.day/e.plan.totalDays*100,ed=e.progress.otCycle||e.progress.currentCycle||1;return(0,a.jsx)(k.L,{children:(0,a.jsxs)("div",{className:"container mx-auto max-w-4xl p-4 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)(l.C,{variant:"secondary",children:["Day ",e.reading.day]}),(0,a.jsxs)(l.C,{variant:"outline",children:["Phase ",er]}),(0,a.jsxs)(l.C,{variant:"outline",children:["OT Cycle ",ed]}),(0,a.jsxs)(n.z,{variant:"outline",size:"sm",onClick:()=>_(!I),className:"text-xs bg-green-50 border-green-200 text-green-700 hover:bg-green-100",children:[(0,a.jsx)(x,{className:"h-3 w-3 mr-1"}),Z]}),e.reading.ntRepetitionType&&(0,a.jsx)(l.C,{variant:"outline",className:"text-xs",children:"entire_book"===e.reading.ntRepetitionType?"Whole Book":"Chapters"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[X.length>0&&(0,a.jsxs)("h1",{className:"text-xl font-bold font-serif text-blue-700",children:["NT: ",X.join(", ")]}),ee.length>0&&(0,a.jsxs)("h2",{className:"text-lg font-semibold font-serif text-amber-700",children:["OT: ",ee.join(", ")]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[e.reading.totalEstimatedMinutes&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4"}),(0,d.Po)(e.reading.totalEstimatedMinutes)]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.progress.ntCompleted&&(0,a.jsxs)(l.C,{variant:"default",className:"bg-blue-600",children:[(0,a.jsx)(g.Z,{className:"h-3 w-3 mr-1"}),"NT âœ“"]}),e.progress.otCompleted&&(0,a.jsxs)(l.C,{variant:"default",className:"bg-amber-600",children:[(0,a.jsx)(g.Z,{className:"h-3 w-3 mr-1"}),"OT âœ“"]}),e.progress.isCompleted&&(0,a.jsxs)(l.C,{variant:"default",className:"bg-green-600",children:[(0,a.jsx)(g.Z,{className:"h-3 w-3 mr-1"}),"Complete"]})]})]})]}),(0,a.jsx)("div",{className:"w-full bg-muted rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${el}%`}})}),I&&(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(x,{className:"h-5 w-5"}),"Bible Translation"]})}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)(c.m,{selectedTranslation:Z,onTranslationChange:es,userId:Q?.user?.id,showDescription:!0,className:"w-full"}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(n.z,{variant:"outline",onClick:()=>_(!1),className:"w-full",children:"Close Translation Selector"})})]})]}),!e.progress.isCompleted&&(0,a.jsx)(r.Zb,{children:(0,a.jsx)(r.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>V(!J),children:J?(0,a.jsx)(u,{className:"h-4 w-4"}):(0,a.jsx)(j,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("div",{children:["Total: ",Math.floor(Y/60),":",(Y%60).toString().padStart(2,"0")]}),(0,a.jsxs)("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[X.length>0&&(0,a.jsxs)("span",{children:["NT: ",Math.floor(L/60),":",(L%60).toString().padStart(2,"0")]}),ee.length>0&&(0,a.jsxs)("span",{children:["OT: ",Math.floor(A/60),":",(A%60).toString().padStart(2,"0")]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(n.z,{variant:"nt"===W?"default":"outline",size:"sm",onClick:()=>H("nt"),disabled:0===X.length,children:"NT"}),(0,a.jsx)(n.z,{variant:"ot"===W?"default":"outline",size:"sm",onClick:()=>H("ot"),disabled:0===ee.length,children:"OT"}),(0,a.jsx)(n.z,{variant:"both"===W?"default":"outline",size:"sm",onClick:()=>H("both"),children:"Both"})]}),(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>B(!D),children:(0,a.jsx)(f,{className:"h-4 w-4"})}),(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:ei,children:(0,a.jsx)(N,{className:"h-4 w-4"})})]})]})})}),(0,a.jsxs)("div",{className:"space-y-4",children:[X.length>0&&("nt"===W||"both"===W)&&(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"h-5 w-5 text-blue-600"}),"New Testament Reading",e.reading.ntEstimatedMinutes&&(0,a.jsxs)(l.C,{variant:"outline",className:"ml-auto",children:[(0,a.jsx)(p.Z,{className:"h-3 w-3 mr-1"}),(0,d.Po)(e.reading.ntEstimatedMinutes)]}),e.progress.ntCompleted&&(0,a.jsxs)(l.C,{variant:"default",className:"bg-blue-600",children:[(0,a.jsx)(g.Z,{className:"h-3 w-3 mr-1"}),"Completed"]})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[X.join(", "),"entire_book"===e.reading.ntRepetitionType&&(0,a.jsxs)("span",{className:"ml-2 text-xs",children:["â€¢ Read entire book for ",e.reading.ntRepetitionCount," days"]})]})]}),(0,a.jsxs)(r.aY,{children:[P?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(v.Z,{className:"h-8 w-8 animate-spin"})}):(0,a.jsx)("div",{className:"reading-text whitespace-pre-wrap",children:s}),!e.progress.ntCompleted&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,a.jsxs)(n.z,{onClick:()=>ea("nt"),disabled:$,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[$?(0,a.jsx)(v.Z,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Complete NT Reading"]})})]})]}),ee.length>0&&("ot"===W||"both"===W)&&(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"h-5 w-5 text-amber-600"}),"Old Testament Reading",e.reading.otEstimatedMinutes&&(0,a.jsxs)(l.C,{variant:"outline",className:"ml-auto",children:[(0,a.jsx)(p.Z,{className:"h-3 w-3 mr-1"}),(0,d.Po)(e.reading.otEstimatedMinutes)]}),e.progress.otCompleted&&(0,a.jsxs)(l.C,{variant:"default",className:"bg-amber-600",children:[(0,a.jsx)(g.Z,{className:"h-3 w-3 mr-1"}),"Completed"]})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[ee.join(", ")," â€¢ Cycle ",ed]})]}),(0,a.jsxs)(r.aY,{children:[P?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(v.Z,{className:"h-8 w-8 animate-spin"})}):(0,a.jsx)("div",{className:"reading-text whitespace-pre-wrap",children:h}),!e.progress.otCompleted&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,a.jsxs)(n.z,{onClick:()=>ea("ot"),disabled:$,size:"sm",className:"bg-amber-600 hover:bg-amber-700",children:[$?(0,a.jsx)(v.Z,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Complete OT Reading"]})})]})]})]}),D&&(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"Personal Notes"})}),(0,a.jsxs)(r.aY,{className:"space-y-4",children:[(0,a.jsx)(o,{placeholder:"Write your reflections and insights...",value:R,onChange:e=>M(e.target.value),rows:4}),(0,a.jsx)(n.z,{onClick:en,disabled:!R.trim(),children:"Save Note"}),e.notes.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Previous Notes"}),e.notes.map(e=>(0,a.jsxs)("div",{className:"p-3 bg-muted rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm",children:e.content}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(e.createdAt).toLocaleDateString()})]},e.id))]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[!e.progress.isCompleted&&(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[e.progress.ntCompleted&&e.progress.otCompleted?(0,a.jsx)("div",{className:"text-center py-2",children:(0,a.jsxs)(l.C,{variant:"default",className:"bg-green-600",children:[(0,a.jsx)(g.Z,{className:"h-3 w-3 mr-1"}),"Day ",e.reading.day," Complete!"]})}):(0,a.jsxs)(n.z,{onClick:()=>ea(),disabled:$,className:"w-full bg-green-600 hover:bg-green-700",children:[$?(0,a.jsx)(v.Z,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Complete All Readings"]}),(0,a.jsxs)("div",{className:"flex gap-2 text-sm",children:[X.length>0&&(0,a.jsxs)("div",{className:`flex-1 p-2 rounded border text-center ${e.progress.ntCompleted?"bg-blue-50 border-blue-200 text-blue-700":"bg-muted border-muted-foreground/20"}`,children:[(0,a.jsx)("div",{className:"font-medium",children:"New Testament"}),(0,a.jsx)("div",{className:"text-xs",children:e.progress.ntCompleted?"âœ“ Complete":"In Progress"})]}),ee.length>0&&(0,a.jsxs)("div",{className:`flex-1 p-2 rounded border text-center ${e.progress.otCompleted?"bg-amber-50 border-amber-200 text-amber-700":"bg-muted border-muted-foreground/20"}`,children:[(0,a.jsx)("div",{className:"font-medium",children:"Old Testament"}),(0,a.jsx)("div",{className:"text-xs",children:e.progress.otCompleted?"âœ“ Complete":"In Progress"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(n.z,{variant:"outline",onClick:()=>K.push(`/read/${e.navigation.previous?.day}`),disabled:!e.navigation.previous,children:[(0,a.jsx)(y,{className:"h-4 w-4"}),"Previous"]}),(0,a.jsxs)(n.z,{variant:"outline",onClick:()=>K.push(`/read/${e.navigation.next?.day}`),disabled:!e.navigation.next,children:["Next",(0,a.jsx)(w.Z,{className:"h-4 w-4"})]})]})]})]})})}},6124:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(2154).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])}},function(e){e.O(0,[808,75,327,151,270,119,640,494,386,156,744],function(){return e(e.s=1402)}),_N_E=e.O()}]);