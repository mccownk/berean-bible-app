(()=>{var e={};e.id=388,e.ids=[388],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},82869:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>o}),s(82072),s(14202),s(71363);var a=s(36576),i=s(72007),r=s(21818),n=s.n(r),l=s(88897),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o=["",{children:["read",{children:["[day]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,82072)),"/home/ubuntu/berean-bible-app/app/app/read/[day]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,14202)),"/home/ubuntu/berean-bible-app/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,71363,23)),"next/dist/client/components/not-found-error"]}],c=["/home/ubuntu/berean-bible-app/app/app/read/[day]/page.tsx"],m="/read/[day]/page",p={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/read/[day]/page",pathname:"/read/[day]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},54675:(e,t,s)=>{Promise.resolve().then(s.bind(s,74828))},74828:(e,t,s)=>{"use strict";s.d(t,{ReadingContent:()=>P});var a=s(62901),i=s(24383),r=s(27878),n=s(23803),l=s(31606),d=s(68637);let o=i.forwardRef(({className:e,...t},s)=>a.jsx("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));o.displayName="Textarea";var c=s(81286),m=s(60437),p=s(71945);let h=(0,p.Z)("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);var x=s(21391),u=s(23094);let g=(0,p.Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),j=(0,p.Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),y=(0,p.Z)("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]),b=(0,p.Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var v=s(18541),f=s(10333);let N=(0,p.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var C=s(60004),w=s(84374),k=s(19191),T=s(84700);function P({data:e}){let[t,s]=(0,i.useState)(""),[p,P]=(0,i.useState)(""),[S,R]=(0,i.useState)("ESV"),[Z,z]=(0,i.useState)(!0),[M,E]=(0,i.useState)(!1),[_,q]=(0,i.useState)(""),[$,A]=(0,i.useState)(!1),[I,O]=(0,i.useState)(!1),[D,B]=(0,i.useState)(0),[F,G]=(0,i.useState)(0),[L,Y]=(0,i.useState)(0),[J,U]=(0,i.useState)(!1),[V,W]=(0,i.useState)("both"),{toast:H}=(0,m.pm)(),X=(0,w.useRouter)(),{data:K}=(0,T.useSession)(),Q=e.reading.ntPassages||e.reading.passages||[],ee=e.reading.otPassages||[];[...Q,...ee];let et=async e=>{R(e),z(!0);try{await es(e),H({title:"Translation updated",description:`Switched to ${e}`})}catch(e){H({title:"Error changing translation",description:"Please try again.",variant:"destructive"})}},es=async(e=S)=>{try{if(z(!0),Q.length>0){let t=await fetch(`/api/bible/passage?passages=${Q.join(",")}&translation=${e}`),a=await t.json();t.ok&&s(a.content)}if(ee.length>0){let t=await fetch(`/api/bible/passage?passages=${ee.join(",")}&translation=${e}`),s=await t.json();t.ok&&P(s.content)}}catch(e){H({title:"Error loading Bible text",description:"Please check your connection and try again.",variant:"destructive"})}finally{z(!1)}},ea=async t=>{E(!0);try{if((await fetch("/api/progress/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({progressId:e.progress.id,section:t,ntReadingTimeSeconds:F,otReadingTimeSeconds:L,totalReadingTimeSeconds:D})})).ok)t?H({title:`${t.toUpperCase()} reading completed! ðŸŽ‰`,description:`Great job on completing the ${"nt"===t?"New Testament":"Old Testament"} portion.`}):(H({title:"Reading completed! \uD83C\uDF89",description:"Great job on your daily Scripture reading."}),setTimeout(()=>{X.push("/dashboard")},1500));else throw Error("Failed to mark reading as complete")}catch(e){H({title:"Error",description:"Failed to mark reading as complete. Please try again.",variant:"destructive"})}finally{E(!1)}},ei=async()=>{let t=[Q.length>0?`NT: ${Q.join(", ")}`:"",ee.length>0?`OT: ${ee.join(", ")}`:""].filter(Boolean).join(" | "),s={title:`Day ${e.reading.day}: ${t}`,text:`I'm reading ${t} today as part of my 1,260-day Berean Bible journey! (Phase ${e.reading.phase})`,url:window.location.href};if(navigator.share)try{await navigator.share(s)}catch(e){}else await navigator.clipboard.writeText(`${s.text} ${s.url}`),H({title:"Copied to clipboard",description:"Share link has been copied to your clipboard."})},er=async()=>{if(_.trim())try{if((await fetch("/api/notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({readingId:e.reading.id,content:_.trim()})})).ok)H({title:"Note saved",description:"Your reflection has been saved."}),q(""),A(!1);else throw Error("Failed to save note")}catch(e){H({title:"Error",description:"Failed to save note. Please try again.",variant:"destructive"})}},en=e.reading.phase||(0,d.p)(e.reading.day),el=e.reading.day/e.plan.totalDays*100,ed=e.progress.otCycle||e.progress.currentCycle||1;return a.jsx(k.L,{children:(0,a.jsxs)("div",{className:"container mx-auto max-w-4xl p-4 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)(l.C,{variant:"secondary",children:["Day ",e.reading.day]}),(0,a.jsxs)(l.C,{variant:"outline",children:["Phase ",en]}),(0,a.jsxs)(l.C,{variant:"outline",children:["OT Cycle ",ed]}),(0,a.jsxs)(r.z,{variant:"outline",size:"sm",onClick:()=>O(!I),className:"text-xs bg-green-50 border-green-200 text-green-700 hover:bg-green-100",children:[a.jsx(h,{className:"h-3 w-3 mr-1"}),S]}),e.reading.ntRepetitionType&&a.jsx(l.C,{variant:"outline",className:"text-xs",children:"entire_book"===e.reading.ntRepetitionType?"Whole Book":"Chapters"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[Q.length>0&&(0,a.jsxs)("h1",{className:"text-xl font-bold font-serif text-blue-700",children:["NT: ",Q.join(", ")]}),ee.length>0&&(0,a.jsxs)("h2",{className:"text-lg font-semibold font-serif text-amber-700",children:["OT: ",ee.join(", ")]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[e.reading.totalEstimatedMinutes&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[a.jsx(x.Z,{className:"h-4 w-4"}),(0,d.Po)(e.reading.totalEstimatedMinutes)]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.progress.ntCompleted&&(0,a.jsxs)(l.C,{variant:"default",className:"bg-blue-600",children:[a.jsx(u.Z,{className:"h-3 w-3 mr-1"}),"NT âœ“"]}),e.progress.otCompleted&&(0,a.jsxs)(l.C,{variant:"default",className:"bg-amber-600",children:[a.jsx(u.Z,{className:"h-3 w-3 mr-1"}),"OT âœ“"]}),e.progress.isCompleted&&(0,a.jsxs)(l.C,{variant:"default",className:"bg-green-600",children:[a.jsx(u.Z,{className:"h-3 w-3 mr-1"}),"Complete"]})]})]})]}),a.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:a.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${el}%`}})}),I&&(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(h,{className:"h-5 w-5"}),"Bible Translation"]})}),(0,a.jsxs)(n.aY,{children:[a.jsx(c.m,{selectedTranslation:S,onTranslationChange:et,userId:K?.user?.id,showDescription:!0,className:"w-full"}),a.jsx("div",{className:"mt-4",children:a.jsx(r.z,{variant:"outline",onClick:()=>O(!1),className:"w-full",children:"Close Translation Selector"})})]})]}),!e.progress.isCompleted&&a.jsx(n.Zb,{children:a.jsx(n.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(r.z,{variant:"outline",size:"sm",onClick:()=>U(!J),children:J?a.jsx(g,{className:"h-4 w-4"}):a.jsx(j,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("div",{children:["Total: ",Math.floor(D/60),":",(D%60).toString().padStart(2,"0")]}),(0,a.jsxs)("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[Q.length>0&&(0,a.jsxs)("span",{children:["NT: ",Math.floor(F/60),":",(F%60).toString().padStart(2,"0")]}),ee.length>0&&(0,a.jsxs)("span",{children:["OT: ",Math.floor(L/60),":",(L%60).toString().padStart(2,"0")]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(r.z,{variant:"nt"===V?"default":"outline",size:"sm",onClick:()=>W("nt"),disabled:0===Q.length,children:"NT"}),a.jsx(r.z,{variant:"ot"===V?"default":"outline",size:"sm",onClick:()=>W("ot"),disabled:0===ee.length,children:"OT"}),a.jsx(r.z,{variant:"both"===V?"default":"outline",size:"sm",onClick:()=>W("both"),children:"Both"})]}),a.jsx(r.z,{variant:"outline",size:"sm",onClick:()=>A(!$),children:a.jsx(y,{className:"h-4 w-4"})}),a.jsx(r.z,{variant:"outline",size:"sm",onClick:ei,children:a.jsx(b,{className:"h-4 w-4"})})]})]})})}),(0,a.jsxs)("div",{className:"space-y-4",children:[Q.length>0&&("nt"===V||"both"===V)&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(v.Z,{className:"h-5 w-5 text-blue-600"}),"New Testament Reading",e.reading.ntEstimatedMinutes&&(0,a.jsxs)(l.C,{variant:"outline",className:"ml-auto",children:[a.jsx(x.Z,{className:"h-3 w-3 mr-1"}),(0,d.Po)(e.reading.ntEstimatedMinutes)]}),e.progress.ntCompleted&&(0,a.jsxs)(l.C,{variant:"default",className:"bg-blue-600",children:[a.jsx(u.Z,{className:"h-3 w-3 mr-1"}),"Completed"]})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[Q.join(", "),"entire_book"===e.reading.ntRepetitionType&&(0,a.jsxs)("span",{className:"ml-2 text-xs",children:["â€¢ Read entire book for ",e.reading.ntRepetitionCount," days"]})]})]}),(0,a.jsxs)(n.aY,{children:[Z?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(f.Z,{className:"h-8 w-8 animate-spin"})}):a.jsx("div",{className:"reading-text whitespace-pre-wrap",children:t}),!e.progress.ntCompleted&&a.jsx("div",{className:"mt-4 pt-4 border-t",children:(0,a.jsxs)(r.z,{onClick:()=>ea("nt"),disabled:M,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[M?a.jsx(f.Z,{className:"h-4 w-4 animate-spin mr-2"}):a.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Complete NT Reading"]})})]})]}),ee.length>0&&("ot"===V||"both"===V)&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(v.Z,{className:"h-5 w-5 text-amber-600"}),"Old Testament Reading",e.reading.otEstimatedMinutes&&(0,a.jsxs)(l.C,{variant:"outline",className:"ml-auto",children:[a.jsx(x.Z,{className:"h-3 w-3 mr-1"}),(0,d.Po)(e.reading.otEstimatedMinutes)]}),e.progress.otCompleted&&(0,a.jsxs)(l.C,{variant:"default",className:"bg-amber-600",children:[a.jsx(u.Z,{className:"h-3 w-3 mr-1"}),"Completed"]})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[ee.join(", ")," â€¢ Cycle ",ed]})]}),(0,a.jsxs)(n.aY,{children:[Z?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(f.Z,{className:"h-8 w-8 animate-spin"})}):a.jsx("div",{className:"reading-text whitespace-pre-wrap",children:p}),!e.progress.otCompleted&&a.jsx("div",{className:"mt-4 pt-4 border-t",children:(0,a.jsxs)(r.z,{onClick:()=>ea("ot"),disabled:M,size:"sm",className:"bg-amber-600 hover:bg-amber-700",children:[M?a.jsx(f.Z,{className:"h-4 w-4 animate-spin mr-2"}):a.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Complete OT Reading"]})})]})]})]}),$&&(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{children:"Personal Notes"})}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[a.jsx(o,{placeholder:"Write your reflections and insights...",value:_,onChange:e=>q(e.target.value),rows:4}),a.jsx(r.z,{onClick:er,disabled:!_.trim(),children:"Save Note"}),e.notes.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-semibold",children:"Previous Notes"}),e.notes.map(e=>(0,a.jsxs)("div",{className:"p-3 bg-muted rounded-lg",children:[a.jsx("p",{className:"text-sm",children:e.content}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(e.createdAt).toLocaleDateString()})]},e.id))]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[!e.progress.isCompleted&&(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[e.progress.ntCompleted&&e.progress.otCompleted?a.jsx("div",{className:"text-center py-2",children:(0,a.jsxs)(l.C,{variant:"default",className:"bg-green-600",children:[a.jsx(u.Z,{className:"h-3 w-3 mr-1"}),"Day ",e.reading.day," Complete!"]})}):(0,a.jsxs)(r.z,{onClick:()=>ea(),disabled:M,className:"w-full bg-green-600 hover:bg-green-700",children:[M?a.jsx(f.Z,{className:"h-4 w-4 animate-spin mr-2"}):a.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Complete All Readings"]}),(0,a.jsxs)("div",{className:"flex gap-2 text-sm",children:[Q.length>0&&(0,a.jsxs)("div",{className:`flex-1 p-2 rounded border text-center ${e.progress.ntCompleted?"bg-blue-50 border-blue-200 text-blue-700":"bg-muted border-muted-foreground/20"}`,children:[a.jsx("div",{className:"font-medium",children:"New Testament"}),a.jsx("div",{className:"text-xs",children:e.progress.ntCompleted?"âœ“ Complete":"In Progress"})]}),ee.length>0&&(0,a.jsxs)("div",{className:`flex-1 p-2 rounded border text-center ${e.progress.otCompleted?"bg-amber-50 border-amber-200 text-amber-700":"bg-muted border-muted-foreground/20"}`,children:[a.jsx("div",{className:"font-medium",children:"Old Testament"}),a.jsx("div",{className:"text-xs",children:e.progress.otCompleted?"âœ“ Complete":"In Progress"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(r.z,{variant:"outline",onClick:()=>X.push(`/read/${e.navigation.previous?.day}`),disabled:!e.navigation.previous,children:[a.jsx(N,{className:"h-4 w-4"}),"Previous"]}),(0,a.jsxs)(r.z,{variant:"outline",onClick:()=>X.push(`/read/${e.navigation.next?.day}`),disabled:!e.navigation.next,children:["Next",a.jsx(C.Z,{className:"h-4 w-4"})]})]})]})]})})}},23094:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(71945).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},82072:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c,dynamic:()=>o});var a=s(83537),i=s(15438),r=s(57978),n=s(11826),l=s(83178);let d=(0,s(88895).createProxy)(String.raw`/home/ubuntu/berean-bible-app/app/components/reading/reading-content.tsx#ReadingContent`),o="force-dynamic";async function c({params:e}){let t=await (0,r.getServerSession)(n.L);t||(0,i.redirect)("/");let s=parseInt(e.day);(isNaN(s)||s<1||s>1260)&&(0,i.redirect)("/dashboard");let o=await l._.readingPlan.findFirst({where:{isActive:!0},include:{dailyReadings:{where:{day:s},include:{notes:{where:{userId:t.user.id},orderBy:{createdAt:"desc"}}}}}});o&&o.dailyReadings[0]||(0,i.redirect)("/dashboard");let c=o.dailyReadings[0],m=await l._.readingProgress.findUnique({where:{userId_planId_readingId:{userId:t.user.id,planId:o.id,readingId:c.id}}});m||(m=await l._.readingProgress.create({data:{userId:t.user.id,planId:o.id,readingId:c.id,currentPhase:c.phase||1,otCycle:c.otCycle||1,isCompleted:!1,ntCompleted:!1,otCompleted:!1}}));let p=await l._.dailyReading.findFirst({where:{planId:o.id,day:s>1?s-1:1260}}),h=await l._.dailyReading.findFirst({where:{planId:o.id,day:s<1260?s+1:1}}),x={plan:{id:o.id,name:o.name,totalDays:o.totalDays},reading:{id:c.id,day:c.day,phase:c.phase,ntPassages:c.ntPassages||[],ntEstimatedMinutes:c.ntEstimatedMinutes,ntRepetitionType:c.ntRepetitionType,ntRepetitionCount:c.ntRepetitionCount,otPassages:c.otPassages||[],otEstimatedMinutes:c.otEstimatedMinutes,otCycle:c.otCycle,totalEstimatedMinutes:c.totalEstimatedMinutes,passages:[...c.ntPassages||[],...c.otPassages||[]],estimatedMinutes:c.totalEstimatedMinutes},progress:{id:m.id,isCompleted:m.isCompleted,completedAt:m.completedAt,totalReadingTimeSeconds:m.totalReadingTimeSeconds,currentPhase:m.currentPhase||1,otCycle:m.otCycle||1,ntCompleted:m.ntCompleted||!1,ntCompletedAt:m.ntCompletedAt,ntReadingTimeSeconds:m.ntReadingTimeSeconds,otCompleted:m.otCompleted||!1,otCompletedAt:m.otCompletedAt,otReadingTimeSeconds:m.otReadingTimeSeconds,readingTimeSeconds:m.totalReadingTimeSeconds,currentCycle:m.otCycle||1},notes:c.notes.map(e=>({id:e.id,content:e.content,createdAt:e.createdAt,updatedAt:e.updatedAt})),navigation:{previous:p?{day:p.day}:null,next:h?{day:h.day}:null}};return a.jsx(d,{data:x})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[30,249,472,535,752,358,621,184,675,392,286],()=>s(82869));module.exports=a})();