(()=>{var e={};e.id=178,e.ids=[178],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},4661:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o}),s(65834),s(14202),s(71363);var a=s(36576),t=s(72007),i=s(21818),n=s.n(i),l=s(88897),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(r,d);let o=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,65834)),"/home/ubuntu/berean-bible-app/app/app/profile/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,14202)),"/home/ubuntu/berean-bible-app/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,71363,23)),"next/dist/client/components/not-found-error"]}],c=["/home/ubuntu/berean-bible-app/app/app/profile/page.tsx"],u="/profile/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},5355:(e,r,s)=>{Promise.resolve().then(s.bind(s,55817))},55817:(e,r,s)=>{"use strict";s.d(r,{ProfileContent:()=>Y});var a=s(62901),t=s(24383),i=s(84700),n=s(27878),l=s(250),d=s(74128),o=s(23803),c=s(1940),u=s(56163),p=s(89291),m=s(98106),f=s(45666),x=s(49209),h=s(74132),j="Switch",[g,b]=(0,p.b)(j),[y,v]=g(j),w=t.forwardRef((e,r)=>{let{__scopeSwitch:s,name:i,checked:n,defaultChecked:l,required:d,disabled:o,value:p="on",onCheckedChange:f,...x}=e,[j,g]=t.useState(null),b=(0,u.e)(r,e=>g(e)),v=t.useRef(!1),w=!j||!!j.closest("form"),[N=!1,k]=(0,m.T)({prop:n,defaultProp:l,onChange:f});return(0,a.jsxs)(y,{scope:s,checked:N,disabled:o,children:[(0,a.jsx)(h.WV.button,{type:"button",role:"switch","aria-checked":N,"aria-required":d,"data-state":P(N),"data-disabled":o?"":void 0,disabled:o,value:p,...x,ref:b,onClick:(0,c.M)(e.onClick,e=>{k(e=>!e),w&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())})}),w&&(0,a.jsx)(S,{control:j,bubbles:!v.current,name:i,value:p,checked:N,required:d,disabled:o,style:{transform:"translateX(-100%)"}})]})});w.displayName=j;var N="SwitchThumb",k=t.forwardRef((e,r)=>{let{__scopeSwitch:s,...t}=e,i=v(N,s);return(0,a.jsx)(h.WV.span,{"data-state":P(i.checked),"data-disabled":i.disabled?"":void 0,...t,ref:r})});k.displayName=N;var S=e=>{let{control:r,checked:s,bubbles:i=!0,...n}=e,l=t.useRef(null),d=(0,f.D)(s),o=(0,x.t)(r);return t.useEffect(()=>{let e=l.current,r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==s&&r){let a=new Event("click",{bubbles:i});r.call(e,s),e.dispatchEvent(a)}},[d,s,i]),(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...n,tabIndex:-1,ref:l,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function P(e){return e?"checked":"unchecked"}var _=s(68637);let T=t.forwardRef(({className:e,...r},s)=>a.jsx(w,{className:(0,_.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...r,ref:s,children:a.jsx(k,{className:(0,_.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));T.displayName=w.displayName;var R=s(72388),C=s(60437),E=s(35600),q=s(81286),M=s(25650),Z=s(77185),z=s(67935),D=s(21391),O=s(71945);let A=(0,O.Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);var I=s(10333);let L=(0,O.Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var Q=s(84374),V=s(19191);function Y({data:e}){let{update:r}=(0,i.useSession)(),{toast:s}=(0,C.pm)(),c=(0,Q.useRouter)(),{theme:u,setTheme:p,mounted:m}=(0,E.v)(),[f,x]=(0,t.useState)(!1),[h,j]=(0,t.useState)(e.user.name||""),[g,b]=(0,t.useState)(e.user.preferences.notificationsEnabled),[y,v]=(0,t.useState)(e.user.preferences.theme||"light"),[w,N]=(0,t.useState)(e.user.preferences.fontSize||"medium"),[k,S]=(0,t.useState)(e.user.preferences.preferredReadingTime||15),[P,O]=(0,t.useState)(e.user.preferences.preferredTimeOfDay||"Morning"),[Y,B]=(0,t.useState)(e.user.preferences.preferredStartTime||"09:00"),[F,G]=(0,t.useState)(e.user.preferences.preferredTranslation||"ESV"),U=async()=>{x(!0);try{if((await fetch("/api/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:h,notificationsEnabled:g,theme:y,fontSize:w,preferredReadingTime:k,preferredTimeOfDay:P,preferredStartTime:Y,preferredTranslation:F})})).ok)await r({name:h}),s({title:"Profile updated",description:"Your preferences have been saved successfully."});else throw Error("Failed to update profile")}catch(e){s({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"})}finally{x(!1)}},H=async()=>{await (0,i.signOut)({redirect:!1}),c.push("/")},W=async()=>{try{let e=await fetch("/api/profile/export");if(e.ok){let r=await e.blob(),a=window.URL.createObjectURL(r),t=document.createElement("a");t.href=a,t.download=`berean-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(a),document.body.removeChild(t),s({title:"Data exported",description:"Your reading data has been downloaded."})}else throw Error("Failed to export data")}catch(e){s({title:"Error",description:"Failed to export data. Please try again.",variant:"destructive"})}};return a.jsx(V.L,{children:(0,a.jsxs)("div",{className:"container mx-auto max-w-2xl p-4 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold font-serif",children:"Profile"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your account and reading preferences"})]}),(0,a.jsxs)(n.z,{variant:"outline",onClick:H,children:[a.jsx(M.Z,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]}),(0,a.jsxs)(o.Zb,{children:[a.jsx(o.Ol,{children:(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[a.jsx(Z.Z,{className:"h-5 w-5"}),"Account Information"]})}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{htmlFor:"name",children:"Name"}),a.jsx(l.I,{id:"name",value:h,onChange:e=>j(e.target.value),placeholder:"Enter your name"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{htmlFor:"email",children:"Email"}),a.jsx(l.I,{id:"email",value:e.user.email,disabled:!0,className:"bg-muted"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{children:"Member Since"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:(0,_.p6)(e.user.createdAt)})]})]})]}),(0,a.jsxs)(o.Zb,{children:[a.jsx(o.Ol,{children:(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[a.jsx(z.Z,{className:"h-5 w-5"}),"Reading Preferences"]})}),(0,a.jsxs)(o.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{children:"Preferred Reading Time"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(D.Z,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(l.I,{type:"number",value:k,onChange:e=>S(Number(e.target.value)),min:"5",max:"60",className:"w-20"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"minutes per day"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{children:"Time of Day Preference"}),(0,a.jsxs)(R.Ph,{value:P,onValueChange:O,children:[a.jsx(R.i4,{children:a.jsx(R.ki,{placeholder:"Select time of day"})}),(0,a.jsxs)(R.Bw,{children:[a.jsx(R.Ql,{value:"Morning",children:"Morning"}),a.jsx(R.Ql,{value:"Afternoon",children:"Afternoon"}),a.jsx(R.Ql,{value:"Evening",children:"Evening"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{children:"Preferred Start Time"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(D.Z,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(l.I,{type:"time",value:Y,onChange:e=>B(e.target.value),className:"w-32"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"for your daily reading"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{children:"Theme"}),(0,a.jsxs)(R.Ph,{value:y,onValueChange:e=>{v(e),p(e)},children:[a.jsx(R.i4,{children:a.jsx(R.ki,{})}),(0,a.jsxs)(R.Bw,{children:[a.jsx(R.Ql,{value:"light",children:"Light"}),a.jsx(R.Ql,{value:"dark",children:"Dark"}),a.jsx(R.Ql,{value:"sepia",children:"Sepia"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{children:"Font Size"}),(0,a.jsxs)(R.Ph,{value:w,onValueChange:N,children:[a.jsx(R.i4,{children:a.jsx(R.ki,{})}),(0,a.jsxs)(R.Bw,{children:[a.jsx(R.Ql,{value:"small",children:"Small"}),a.jsx(R.Ql,{value:"medium",children:"Medium"}),a.jsx(R.Ql,{value:"large",children:"Large"}),a.jsx(R.Ql,{value:"extra-large",children:"Extra Large"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(q.m,{selectedTranslation:F,onTranslationChange:G,userId:e.user.id,showDescription:!1,className:"w-full"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose your preferred Bible translation for reading"})]})]})]}),(0,a.jsxs)(o.Zb,{children:[a.jsx(o.Ol,{children:(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[a.jsx(A,{className:"h-5 w-5"}),"Notifications"]})}),a.jsx(o.aY,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[a.jsx(d._,{children:"Daily Reading Reminders"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified when it's time for your daily reading"})]}),a.jsx(T,{checked:g,onCheckedChange:b})]})})]}),(0,a.jsxs)(o.Zb,{children:[a.jsx(o.Ol,{children:a.jsx(o.ll,{children:"Data Management"})}),a.jsx(o.aY,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[a.jsx(d._,{children:"Export Data"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Download your reading progress and notes"})]}),a.jsx(n.z,{variant:"outline",onClick:W,children:"Export"})]})})]}),(0,a.jsxs)(n.z,{onClick:U,disabled:f,className:"w-full",children:[f?a.jsx(I.Z,{className:"h-4 w-4 animate-spin mr-2"}):a.jsx(L,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})})}},250:(e,r,s)=>{"use strict";s.d(r,{I:()=>n});var a=s(62901),t=s(24383),i=s(68637);let n=t.forwardRef(({className:e,type:r,...s},t)=>a.jsx("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));n.displayName="Input"},74128:(e,r,s)=>{"use strict";s.d(r,{_:()=>c});var a=s(62901),t=s(24383),i=s(74132),n=t.forwardRef((e,r)=>(0,a.jsx)(i.WV.label,{...e,ref:r,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));n.displayName="Label";var l=s(47279),d=s(68637);let o=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=t.forwardRef(({className:e,...r},s)=>a.jsx(n,{ref:s,className:(0,d.cn)(o(),e),...r}));c.displayName=n.displayName},72388:(e,r,s)=>{"use strict";s.d(r,{Bw:()=>x,Ph:()=>c,Ql:()=>h,i4:()=>p,ki:()=>u});var a=s(62901),t=s(24383),i=s(47337),n=s(7259),l=s(26026),d=s(85453),o=s(68637);let c=i.fC;i.ZA;let u=i.B4,p=t.forwardRef(({className:e,children:r,...s},t)=>(0,a.jsxs)(i.xz,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:[r,a.jsx(i.JO,{asChild:!0,children:a.jsx(n.Z,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=i.xz.displayName;let m=t.forwardRef(({className:e,...r},s)=>a.jsx(i.u_,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:a.jsx(l.Z,{className:"h-4 w-4"})}));m.displayName=i.u_.displayName;let f=t.forwardRef(({className:e,...r},s)=>a.jsx(i.$G,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:a.jsx(n.Z,{className:"h-4 w-4"})}));f.displayName=i.$G.displayName;let x=t.forwardRef(({className:e,children:r,position:s="popper",...t},n)=>a.jsx(i.h_,{children:(0,a.jsxs)(i.VY,{ref:n,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...t,children:[a.jsx(m,{}),a.jsx(i.l_,{className:(0,o.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),a.jsx(f,{})]})}));x.displayName=i.VY.displayName,t.forwardRef(({className:e,...r},s)=>a.jsx(i.__,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...r})).displayName=i.__.displayName;let h=t.forwardRef(({className:e,children:r,...s},t)=>(0,a.jsxs)(i.ck,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(i.wU,{children:a.jsx(d.Z,{className:"h-4 w-4"})})}),a.jsx(i.eT,{children:r})]}));h.displayName=i.ck.displayName,t.forwardRef(({className:e,...r},s)=>a.jsx(i.Z0,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...r})).displayName=i.Z0.displayName},65834:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>c,dynamic:()=>o});var a=s(83537),t=s(15438),i=s(57978),n=s(11826),l=s(83178);let d=(0,s(88895).createProxy)(String.raw`/home/ubuntu/berean-bible-app/app/components/profile/profile-content.tsx#ProfileContent`),o="force-dynamic";async function c(){let e=await (0,i.getServerSession)(n.L);e||(0,t.redirect)("/");let r=await l._.user.findUnique({where:{id:e.user.id},select:{id:!0,name:!0,email:!0,createdAt:!0,timezone:!0,preferredReadingTime:!0,preferredTimeOfDay:!0,preferredStartTime:!0,notificationsEnabled:!0,theme:!0,fontSize:!0,preferredTranslation:!0}});r||(0,t.redirect)("/");let s={user:{id:r.id,name:r.name,email:r.email,createdAt:r.createdAt,preferences:{timezone:r.timezone,preferredReadingTime:r.preferredReadingTime,preferredTimeOfDay:r.preferredTimeOfDay,preferredStartTime:r.preferredStartTime,notificationsEnabled:r.notificationsEnabled,theme:r.theme,fontSize:r.fontSize,preferredTranslation:r.preferredTranslation}}};return a.jsx(d,{data:s})}}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[30,249,472,535,752,358,621,184,166,675,392,286],()=>s(4661));module.exports=a})();