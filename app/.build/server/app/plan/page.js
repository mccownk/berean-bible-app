(()=>{var e={};e.id=927,e.ids=[927],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},28421:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o}),t(80055),t(14202),t(71363);var r=t(36576),a=t(72007),i=t(21818),l=t.n(i),n=t(88897),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let o=["",{children:["plan",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,80055)),"/home/ubuntu/berean-bible-app/app/app/plan/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,14202)),"/home/ubuntu/berean-bible-app/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,71363,23)),"next/dist/client/components/not-found-error"]}],c=["/home/ubuntu/berean-bible-app/app/app/plan/page.tsx"],u="/plan/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/plan/page",pathname:"/plan",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},87526:(e,s,t)=>{Promise.resolve().then(t.bind(t,94950))},94950:(e,s,t)=>{"use strict";t.d(s,{PlanContent:()=>g});var r=t(62901),a=t(24383),i=t(23803),l=t(27878),n=t(250),d=t(31606),o=t(21395),c=t(76021),u=t(91046),p=t(18541),m=t(21391),x=t(23094),v=t(68637),f=t(84374),h=t(19191);function g({data:e}){let[s,t]=(0,a.useState)(""),[g,j]=(0,a.useState)("all"),[y,b]=(0,a.useState)(1),N=(0,f.useRouter)(),w=e.readings.filter(e=>{let t=""===s||e.passages.some(e=>e.toLowerCase().includes(s.toLowerCase()))||e.day.toString().includes(s),r="all"===g||"completed"===g&&e.progress?.isCompleted||"pending"===g&&!e.progress?.isCompleted;return t&&r}),C=Math.ceil(w.length/20),P=(y-1)*20,q=w.slice(P,P+20),D=e.overview.completedDays/e.overview.totalDays*100,k=e=>{N.push(`/read/${e}`)},_=q.reduce((e,s)=>{let t=(0,v.p)(s.day);return e[t]||(e[t]=[]),e[t].push(s),e},{});return r.jsx(h.L,{children:(0,r.jsxs)("div",{className:"container mx-auto p-4 space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold font-serif",children:e.plan.name}),r.jsx("p",{className:"text-muted-foreground",children:e.plan.description})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[e.overview.completedDays,"/",e.overview.totalDays]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"days completed"})]})]}),(0,r.jsxs)(i.Zb,{children:[r.jsx(i.Ol,{children:(0,r.jsxs)(i.ll,{className:"flex items-center gap-2",children:[r.jsx(c.Z,{className:"h-5 w-5"}),"Overall Progress"]})}),r.jsx(i.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-sm font-medium",children:[D.toFixed(1),"% Complete"]}),(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Current: Day ",e.overview.currentDay]})]}),r.jsx(o.E,{value:D,className:"h-3"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.overview.completedDays}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Completed"})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.overview.totalDays-e.overview.completedDays}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Remaining"})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(0,v.p)(e.overview.currentDay)}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Current Phase"})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:Math.ceil((e.overview.totalDays-e.overview.completedDays)/7)}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Weeks Left"})]})]})]})})]}),r.jsx(i.Zb,{children:r.jsx(i.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[r.jsx(u.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(n.I,{placeholder:"Search by passage or day number...",value:s,onChange:e=>t(e.target.value),className:"pl-10"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(l.z,{variant:"all"===g?"default":"outline",onClick:()=>j("all"),size:"sm",children:"All"}),r.jsx(l.z,{variant:"completed"===g?"default":"outline",onClick:()=>j("completed"),size:"sm",children:"Completed"}),r.jsx(l.z,{variant:"pending"===g?"default":"outline",onClick:()=>j("pending"),size:"sm",children:"Pending"})]})]})})}),r.jsx("div",{className:"space-y-6",children:Object.entries(_).map(([e,s])=>(0,r.jsxs)(i.Zb,{children:[r.jsx(i.Ol,{children:(0,r.jsxs)(i.ll,{className:"flex items-center gap-2",children:[r.jsx(p.Z,{className:"h-5 w-5"}),e]})}),r.jsx(i.aY,{children:r.jsx("div",{className:"space-y-2",children:s.map(e=>(0,r.jsxs)("div",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-colors ${e.progress?.isCompleted?"bg-green-50 border-green-200 hover:bg-green-100":"bg-background hover:bg-muted"}`,onClick:()=>k(e.day),children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-medium",children:e.day})}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium",children:e.passages.join(", ")}),e.estimatedMinutes&&(0,r.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[r.jsx(m.Z,{className:"h-3 w-3"}),(0,v.Po)(e.estimatedMinutes)]})]})]}),r.jsx("div",{className:"flex items-center gap-2",children:e.progress?.isCompleted?(0,r.jsxs)(d.C,{variant:"default",className:"bg-green-600",children:[r.jsx(x.Z,{className:"h-3 w-3 mr-1"}),"Completed"]}):r.jsx(d.C,{variant:"outline",children:"Pending"})})]},e.id))})})]},e))}),C>1&&(0,r.jsxs)("div",{className:"flex justify-center gap-2",children:[r.jsx(l.z,{variant:"outline",onClick:()=>b(e=>Math.max(1,e-1)),disabled:1===y,children:"Previous"}),(0,r.jsxs)("span",{className:"flex items-center px-4 text-sm",children:["Page ",y," of ",C]}),r.jsx(l.z,{variant:"outline",onClick:()=>b(e=>Math.min(C,e+1)),disabled:y===C,children:"Next"})]})]})})}},250:(e,s,t)=>{"use strict";t.d(s,{I:()=>l});var r=t(62901),a=t(24383),i=t(68637);let l=a.forwardRef(({className:e,type:s,...t},a)=>r.jsx("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));l.displayName="Input"},21395:(e,s,t)=>{"use strict";t.d(s,{E:()=>b});var r=t(62901),a=t(24383),i=t(89291),l=t(74132),n="Progress",[d,o]=(0,i.b)(n),[c,u]=d(n),p=a.forwardRef((e,s)=>{var t,a;let{__scopeProgress:i,value:n=null,max:d,getValueLabel:o=v,...u}=e;(d||0===d)&&!g(d)&&console.error((t=`${d}`,`Invalid prop \`max\` of value \`${t}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let p=g(d)?d:100;null===n||j(n,p)||console.error((a=`${n}`,`Invalid prop \`value\` of value \`${a}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let m=j(n,p)?n:null,x=h(m)?o(m,p):void 0;return(0,r.jsx)(c,{scope:i,value:m,max:p,children:(0,r.jsx)(l.WV.div,{"aria-valuemax":p,"aria-valuemin":0,"aria-valuenow":h(m)?m:void 0,"aria-valuetext":x,role:"progressbar","data-state":f(m,p),"data-value":m??void 0,"data-max":p,...u,ref:s})})});p.displayName=n;var m="ProgressIndicator",x=a.forwardRef((e,s)=>{let{__scopeProgress:t,...a}=e,i=u(m,t);return(0,r.jsx)(l.WV.div,{"data-state":f(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...a,ref:s})});function v(e,s){return`${Math.round(e/s*100)}%`}function f(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function h(e){return"number"==typeof e}function g(e){return h(e)&&!isNaN(e)&&e>0}function j(e,s){return h(e)&&!isNaN(e)&&e<=s&&e>=0}x.displayName=m;var y=t(68637);let b=a.forwardRef(({className:e,value:s,...t},a)=>r.jsx(p,{ref:a,className:(0,y.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...t,children:r.jsx(x,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));b.displayName=p.displayName},23094:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(71945).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},91046:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(71945).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},80055:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c,dynamic:()=>o});var r=t(83537),a=t(15438),i=t(57978),l=t(11826),n=t(83178);let d=(0,t(88895).createProxy)(String.raw`/home/ubuntu/berean-bible-app/app/components/plan/plan-content.tsx#PlanContent`),o="force-dynamic";async function c(){let e=await (0,i.getServerSession)(l.L);e||(0,a.redirect)("/");let s=await n._.readingPlan.findFirst({where:{isActive:!0},include:{dailyReadings:{orderBy:{day:"asc"}}}});if(!s)return r.jsx("div",{children:"No active reading plan found"});let t=await n._.readingProgress.findMany({where:{userId:e.user.id,planId:s.id},include:{dailyReading:!0}}),o=new Map(t.map(e=>[e.readingId,e])),c={plan:{id:s.id,name:s.name,description:s.description,totalDays:s.totalDays},readings:s.dailyReadings.map(e=>({id:e.id,day:e.day,passages:[...e.ntPassages||[],...e.otPassages||[]],estimatedMinutes:e.totalEstimatedMinutes,progress:o.get(e.id)?{isCompleted:o.get(e.id).isCompleted,completedAt:o.get(e.id).completedAt,currentCycle:o.get(e.id).otCycle}:null})),overview:{completedDays:t.filter(e=>e.isCompleted).length,totalDays:s.totalDays,currentDay:t.find(e=>!e.isCompleted)?.dailyReading?.day||1}};return r.jsx(d,{data:c})}}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[30,249,472,535,752,358,621,675,392],()=>t(28421));module.exports=r})();